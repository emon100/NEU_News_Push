name: NEU_News_Push

on: 
  push:
  schedule: #设置定时执行和在推送时执行
   - cron: '*/5 7-23/1 * * *'

jobs:
  Monitor:
    name: My first job
    runs-on: ubuntu-latest

    steps:
    - name: Checkout previous content and config
      uses: actions/checkout@v2
    - name: Do data work.
      uses: emon100/Github_Action_Monitor_Webpage
      id: dataWork
      with:
        prevInfoPath: '../prevContent.json'
        configPath: '../config'

    - name: ServerChan Notify new stuffs.
      uses: yakumioto/serverchan-action@v1
      if: steps.dataWork.outputs.changed == 'true'
      with:
        # Secret key
        key: ${{ secrets.SCKEY_emon100 }}
        # Message title
        text: ${{ steps.dataWork.outputs.title }}
        # Message content
        desp: ${{ steps.dataWork.outputs.markdownText }}
